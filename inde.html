<!DOCTYPE html>
<html lang="en" id="html">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <div id="div-button">
      <div id="borda-div-button">
        <button
          class="butao"
          id="botao-inicio"
          onclick="mudarScroll()"
        ></button>
        <button class="butao" id="botao-meio" onclick="mudarScroll1()"></button>
        <button class="butao" id="botao-fim" onclick="mudarScroll2()"></button>
      </div>
    </div>

    <div id="div-inicio"></div>
    <div id="div-meio"></div>

    <div id="div-fim">
      <div class="div-conteudo-time-line">
        <div class="conteudo" id="d1">
          1
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d2">
          2
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d3">
          3
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d4">
          4
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d5">
          5
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d6">
          6
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d7">
          7
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
        <div class="conteudo" id="d8">
          8
          <div class="div-foto"></div>
          <div class="div-texto"></div>
        </div>
      </div>

      <div id="div-bar-time-line">
        <div id="progres-bar"><div id="animationProgresBar"></div></div>
        <button class="button" onclick="mostrar(xButton[0]), esconder('d1')">
          1
        </button>
        <button class="button" onclick="mostrar(xButton[1]), esconder('d2')">
          2
        </button>
        <button class="button" onclick="mostrar(xButton[2]), esconder('d3')">
          3
        </button>
        <button class="button" onclick="mostrar(xButton[3]), esconder('d4')">
          4
        </button>
        <button class="button" onclick="mostrar(xButton[4]), esconder('d5')">
          5
        </button>
        <button class="button" onclick="mostrar(xButton[5]), esconder('d6')">
          6
        </button>
        <button class="button" onclick="mostrar(xButton[6]), esconder('d7')">
          7
        </button>
        <button class="button" onclick="mostrar(xButton[7]), esconder('d8')">
          8
        </button>
      </div>
    </div>

    <script>
      var veloRowll = 20;
      var animacao = 1;
      var obj = document.getElementById("html");
      var objButton = document.getElementsByClassName("button");
      var xButton = [];
      var xProgres = animationProgresBar.getBoundingClientRect().x;
      var flag = true;
      var p = document.querySelector('html').scrollHeight;
      var scrollPage = p / 3;
      //console.log(p);
      

      for (var i = 0; i < objButton.length; i++) {
        xButton[i] = objButton[i].getBoundingClientRect().x;
      }

      function mudarScroll() {
        var botaoInicio = setInterval(function () {
          if (obj.scrollTop <= 0) {
            clearInterval(botaoInicio);
          }
          obj.scrollTop -= veloRowll;
        }, 1);
      }
      function mudarScroll1() {
        var botaoMeio = setInterval(function () {
          if (obj.scrollTop <= scrollPage - 10) {
            obj.scrollTop += veloRowll;
          } else if (obj.scrollTop >= scrollPage + 10) {
            obj.scrollTop -= veloRowll;
          } else {
            clearInterval(botaoMeio);
          }
        }, 1);
      }
      function mudarScroll2() {
        var botaoFim = setInterval(function () {
          if (obj.scrollTop >= scrollPage*2) {
            clearInterval(botaoFim);
          }
          obj.scrollTop += veloRowll;
        }, 1);
      }

      function mostrar(x) {
        xProgres = Math.floor(xProgres);
        x = Math.floor(x);

        var parar = setInterval(function () {
          if (xProgres < x) {
            document.getElementById("animationProgresBar").style.width =
              animacao + "px";
            xProgres += 1;
            animacao += 1;
          } else if (xProgres > x) {
            document.getElementById("animationProgresBar").style.width =
              animacao + "px";
            xProgres -= 1;
            animacao -= 1;
          } else {
            clearInterval(parar);
          }
        }, 1);
      }

      function esconder(id) {
        var arrey = [
          "d1",
          "d2",
          "d3",
          "d4",
          "d4",
          "d5",
          "d5",
          "d6",
          "d7",
          "d8",
        ];

        if (document.getElementById(id).style.display !== "block") {
          for (let i = 0; i < arrey.length; i++) {
            if (arrey[i] !== id) {
              document.getElementById(arrey[i]).style.display = "none";
            }
          }
          document.getElementById(id).style.display = "block";
        } else document.getElementById(id).style.display = "none";
      }
    </script>
  </body>
</html>
